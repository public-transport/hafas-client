import {DateTime, IANAZone} from 'luxon'

const timezones = new WeakMap()

const formatTime = (profile, when) => {
	let timezone
	if (timezones.has(profile)) timezone = timezones.get(profile)
	else {
		timezone = new IANAZone(profile.timezone)
		timezones.set(profile, timezone)
	}

	return DateTime.fromMillis(+when, {
		locale: profile.locale,
		zone: timezone
	}).toFormat('HH:mm:ss')
}

export {
	formatTime,
}
